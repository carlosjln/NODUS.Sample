Raphael.el.popup=function(n,t,i,r){var h=this.paper||this[0].paper,u,s,f,e,o,c;if(h){switch(this.type){case"text":case"circle":case"ellipse":f=!0;break;default:f=!1}return n=n==null?"up":n,t=t||5,u=this.getBBox(),i=typeof i=="number"?i:f?u.x+u.width/2:u.x,r=typeof r=="number"?r:f?u.y+u.height/2:u.y,e=Math.max(u.width/2-t,0),o=Math.max(u.height/2-t,0),this.translate(i-u.x-(f?u.width/2:0),r-u.y-(f?u.height/2:0)),u=this.getBBox(),c={up:["M",i,r,"l",-t,-t,-e,0,"a",t,t,0,0,1,-t,-t,"l",0,-u.height,"a",t,t,0,0,1,t,-t,"l",t*2+e*2,0,"a",t,t,0,0,1,t,t,"l",0,u.height,"a",t,t,0,0,1,-t,t,"l",-e,0,"z"].join(","),down:["M",i,r,"l",t,t,e,0,"a",t,t,0,0,1,t,t,"l",0,u.height,"a",t,t,0,0,1,-t,t,"l",-(t*2+e*2),0,"a",t,t,0,0,1,-t,-t,"l",0,-u.height,"a",t,t,0,0,1,t,-t,"l",e,0,"z"].join(","),left:["M",i,r,"l",-t,t,0,o,"a",t,t,0,0,1,-t,t,"l",-u.width,0,"a",t,t,0,0,1,-t,-t,"l",0,-(t*2+o*2),"a",t,t,0,0,1,t,-t,"l",u.width,0,"a",t,t,0,0,1,t,t,"l",0,o,"z"].join(","),right:["M",i,r,"l",t,-t,0,-o,"a",t,t,0,0,1,t,-t,"l",u.width,0,"a",t,t,0,0,1,t,t,"l",0,t*2+o*2,"a",t,t,0,0,1,-t,t,"l",-u.width,0,"a",t,t,0,0,1,-t,-t,"l",0,-o,"z"].join(",")},s={up:{x:-!f*(u.width/2),y:-t*2-(f?u.height/2:u.height)},down:{x:-!f*(u.width/2),y:t*2+(f?u.height/2:u.height)},left:{x:-t*2-(f?u.width/2:u.width),y:-!f*(u.height/2)},right:{x:t*2+(f?u.width/2:u.width),y:-!f*(u.height/2)}}[n],this.translate(s.x,s.y),h.path(c[n]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])}},Raphael.el.tag=function(n,t,i,r){var f=3,c=this.paper||this[0].paper,s,u,h,e,o;if(c){s=c.path().attr({fill:"#000",stroke:"#000"}),u=this.getBBox();switch(this.type){case"text":case"circle":case"ellipse":o=!0;break;default:o=!1}return n=n||0,i=typeof i=="number"?i:o?u.x+u.width/2:u.x,r=typeof r=="number"?r:o?u.y+u.height/2:u.y,t=t==null?5:t,e=.5522*t,u.height>=t*2?s.attr({path:["M",i,r+t,"a",t,t,0,1,1,0,-t*2,t,t,0,1,1,0,t*2,"m",0,-t*2-f,"a",t+f,t+f,0,1,0,0,(t+f)*2,"L",i+t+f,r+u.height/2+f,"l",u.width+2*f,0,0,-u.height-2*f,-u.width-2*f,0,"L",i,r-t-f].join(",")}):(h=Math.sqrt(Math.pow(t+f,2)-Math.pow(u.height/2+f,2)),s.attr({path:["M",i,r+t,"c",-e,0,-t,e-t,-t,-t,0,-e,t-e,-t,t,-t,e,0,t,t-e,t,t,0,e,e-t,t,-t,t,"M",i+h,r-u.height/2-f,"a",t+f,t+f,0,1,0,0,u.height+2*f,"l",t+f-h+u.width+2*f,0,0,-u.height-2*f,"L",i+h,r-u.height/2-f].join(",")})),n=360-n,s.rotate(n,i,r),this.attrs?(this.attr(this.attrs.x?"x":"cx",i+t+f+(o?u.width/2:this.type=="text"?u.width:0)).attr("y",o?r:r-u.height/2),this.rotate(n,i,r),n>90&&n<270&&this.attr(this.attrs.x?"x":"cx",i-t-f-(o?u.width/2:u.width)).rotate(180,i,r)):n>90&&n<270?(this.translate(i-u.x-u.width-t-f,r-u.y-u.height/2),this.rotate(n-180,u.x+u.width+t+f,u.y+u.height/2)):(this.translate(i-u.x+t+f,r-u.y-u.height/2),this.rotate(n,u.x-t-f,u.y+u.height/2)),s.insertBefore(this.node?this:this[0])}},Raphael.el.drop=function(n,t,i){var r=this.getBBox(),s=this.paper||this[0].paper,f,u,h,e,o;if(s){switch(this.type){case"text":case"circle":case"ellipse":f=!0;break;default:f=!1}return n=n||0,t=typeof t=="number"?t:f?r.x+r.width/2:r.x,i=typeof i=="number"?i:f?r.y+r.height/2:r.y,u=Math.max(r.width,r.height)+Math.min(r.width,r.height),h=s.path(["M",t,i,"l",u,0,"A",u*.4,u*.4,0,1,0,t+u*.7,i-u*.7,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-n,t,i),n=(n+90)*Math.PI/180,e=t+u*Math.sin(n)-(f?0:r.width/2),o=i+u*Math.cos(n)-(f?0:r.height/2),this.attrs?this.attr(this.attrs.x?"x":"cx",e).attr(this.attrs.y?"y":"cy",o):this.translate(e-r.x,o-r.y),h.insertBefore(this.node?this:this[0])}},Raphael.el.flag=function(n,t,i){var u=3,s=this.paper||this[0].paper;if(s){var o=s.path().attr({fill:"#000",stroke:"#000"}),r=this.getBBox(),f=r.height/2,e;switch(this.type){case"text":case"circle":case"ellipse":e=!0;break;default:e=!1}return n=n||0,t=typeof t=="number"?t:e?r.x+r.width/2:r.x,i=typeof i=="number"?i:e?r.y+r.height/2:r.y,o.attr({path:["M",t,i,"l",f+u,-f-u,r.width+2*u,0,0,r.height+2*u,-r.width-2*u,0,"z"].join(",")}),n=360-n,o.rotate(n,t,i),this.attrs?(this.attr(this.attrs.x?"x":"cx",t+f+u+(e?r.width/2:this.type=="text"?r.width:0)).attr("y",e?i:i-r.height/2),this.rotate(n,t,i),n>90&&n<270&&this.attr(this.attrs.x?"x":"cx",t-f-u-(e?r.width/2:r.width)).rotate(180,t,i)):n>90&&n<270?(this.translate(t-r.x-r.width-f-u,i-r.y-r.height/2),this.rotate(n-180,r.x+r.width+f+u,r.y+r.height/2)):(this.translate(t-r.x+f+u,i-r.y-r.height/2),this.rotate(n,r.x-f-u,r.y+r.height/2)),o.insertBefore(this.node?this:this[0])}},Raphael.el.label=function(){var n=this.getBBox(),i=this.paper||this[0].paper,t=Math.min(20,n.width+10,n.height+10)/2;if(i)return i.rect(n.x-t/2,n.y-t/2,n.width+t,n.height+t,t).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0])},Raphael.el.blob=function(n,t,i){var r=this.getBBox(),h=Math.PI/180,w=this.paper||this[0].paper,l,c,u;if(w){switch(this.type){case"text":case"circle":case"ellipse":c=!0;break;default:c=!1}l=w.path().attr({fill:"#000",stroke:"none"}),n=(+n+1?n:45)+90,u=Math.min(r.height,r.width),t=typeof t=="number"?t:c?r.x+r.width/2:r.x,i=typeof i=="number"?i:c?r.y+r.height/2:r.y;var g=Math.max(r.width+u,u*25/12),nt=Math.max(r.height+u,u*25/12),a=t+u*Math.sin((n-22.5)*h),v=i+u*Math.cos((n-22.5)*h),y=t+u*Math.sin((n+22.5)*h),p=i+u*Math.cos((n+22.5)*h),o=(y-a)/2,s=(p-v)/2,f=g/2,e=nt/2,b=-Math.sqrt(Math.abs(f*f*e*e-f*f*s*s-e*e*o*o)/(f*f*s*s+e*e*o*o)),k=b*f*s/e+(y+a)/2,d=b*-e*o/f+(p+v)/2;return l.attr({x:k,y:d,path:["M",t,i,"L",y,p,"A",f,e,0,1,1,a,v,"z"].join(",")}),this.translate(k-r.x-r.width/2,d-r.y-r.height/2),l.insertBefore(this.node?this:this[0])}},Raphael.fn.label=function(n,t,i){var r=this.set();return i=this.text(n,t,i).attr(Raphael.g.txtattr),r.push(i.label(),i)},Raphael.fn.popup=function(n,t,i,r,u){var f=this.set();return i=this.text(n,t,i).attr(Raphael.g.txtattr),f.push(i.popup(r,u),i)},Raphael.fn.tag=function(n,t,i,r,u){var f=this.set();return i=this.text(n,t,i).attr(Raphael.g.txtattr),f.push(i.tag(r,u),i)},Raphael.fn.flag=function(n,t,i,r){var u=this.set();return i=this.text(n,t,i).attr(Raphael.g.txtattr),u.push(i.flag(r),i)},Raphael.fn.drop=function(n,t,i,r){var u=this.set();return i=this.text(n,t,i).attr(Raphael.g.txtattr),u.push(i.drop(r),i)},Raphael.fn.blob=function(n,t,i,r){var u=this.set();return i=this.text(n,t,i).attr(Raphael.g.txtattr),u.push(i.blob(r),i)},Raphael.el.lighter=function(n){n=n||2;var t=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[t[0],t[1]],t[0]=Raphael.rgb2hsb(Raphael.getRGB(t[0]).hex),t[1]=Raphael.rgb2hsb(Raphael.getRGB(t[1]).hex),t[0].b=Math.min(t[0].b*n,1),t[0].s=t[0].s/n,t[1].b=Math.min(t[1].b*n,1),t[1].s=t[1].s/n,this.attr({fill:"hsb("+[t[0].h,t[0].s,t[0].b]+")",stroke:"hsb("+[t[1].h,t[1].s,t[1].b]+")"}),this},Raphael.el.darker=function(n){n=n||2;var t=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[t[0],t[1]],t[0]=Raphael.rgb2hsb(Raphael.getRGB(t[0]).hex),t[1]=Raphael.rgb2hsb(Raphael.getRGB(t[1]).hex),t[0].s=Math.min(t[0].s*n,1),t[0].b=t[0].b/n,t[1].s=Math.min(t[1].s*n,1),t[1].b=t[1].b/n,this.attr({fill:"hsb("+[t[0].h,t[0].s,t[0].b]+")",stroke:"hsb("+[t[1].h,t[1].s,t[1].b]+")"}),this},Raphael.el.resetBrightness=function(){return this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs),this},function(){var t=["lighter","darker","resetBrightness"],i=["popup","tag","flag","label","drop","blob"],n;for(n in i)(function(n){Raphael.st[n]=function(){return Raphael.el[n].apply(this,arguments)}})(i[n]);for(n in t)(function(n){Raphael.st[n]=function(){for(var t=0;t<this.length;t++)this[t][n].apply(this[t],arguments);return this}})(t[n])}(),Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{font:"12px Arial, sans-serif",fill:"#fff"},colors:function(){for(var t=[.6,.2,.05,.1333,.75,0],i=[],n=0;n<10;n++)n<t.length?i.push("hsb("+t[n]+",.75, .75)"):i.push("hsb("+t[n-t.length]+", 1, .5)");return i}(),snapEnds:function(n,t,i){function o(n){return Math.abs(n-.5)<.25?~~n+.5:Math.round(n)}var f=n,u=t;if(f==u)return{from:f,to:u,power:0};var s=(u-f)/i,e=~~s,h=e,r=0;if(e){while(h)r--,h=~~(s*Math.pow(10,r))/Math.pow(10,r);r++}else{while(!e)r=r||1,e=~~(s*Math.pow(10,r))/Math.pow(10,r),r++;r&&r--}return u=o(t*Math.pow(10,r))/Math.pow(10,r),u<t&&(u=o((t+.5)*Math.pow(10,r))/Math.pow(10,r)),f=o((n-(r>0?0:.5))*Math.pow(10,r))/Math.pow(10,r),{from:f,to:u,power:r}},axis:function(n,t,i,r,u,f,e,o,s,h,c){var l,y,p,w,it,b;h=h==null?2:h,s=s||"t",f=f||10,c=arguments[arguments.length-1];var a=s=="|"||s==" "?["M",n+.5,t,"l",0,.001]:e==1||e==3?["M",n+.5,t,"l",0,-i]:["M",n,t+.5,"l",i,0],rt=this.snapEnds(r,u,f),ut=rt.from,st=rt.to,g=rt.power,nt=0,tt={font:"11px 'Fontin Sans', Fontin-Sans, sans-serif"},v=c.set(),ft;if(ft=(st-ut)/f,l=ut,y=g>0?g:0,d=i/f,+e==1||+e==3){for(p=t,w=(e-1?1:-1)*(h+3+!!(e-1));p>=t-i;)s!="-"&&s!=" "&&(a=a.concat(["M",n-(s=="+"||s=="|"?h:!(e-1)*h*2),p+.5,"l",h*2+1,0])),v.push(c.text(n+w,p,o&&o[nt++]||(Math.round(l)==l?l:+l.toFixed(y))).attr(tt).attr({"text-anchor":e-1?"start":"end"})),l+=ft,p-=d;Math.round(p+d-(t-i))&&(s!="-"&&s!=" "&&(a=a.concat(["M",n-(s=="+"||s=="|"?h:!(e-1)*h*2),t-i+.5,"l",h*2+1,0])),v.push(c.text(n+w,t-i,o&&o[nt]||(Math.round(l)==l?l:+l.toFixed(y))).attr(tt).attr({"text-anchor":e-1?"start":"end"})))}else{l=ut,y=(g>0)*g,w=(e?-1:1)*(h+9+!e);for(var k=n,d=i/f,et=0,ot=0;k<=n+i;)s!="-"&&s!=" "&&(a=a.concat(["M",k+.5,t-(s=="+"?h:!!e*h*2),"l",0,h*2+1])),v.push(et=c.text(k,t+w,o&&o[nt++]||(Math.round(l)==l?l:+l.toFixed(y))).attr(tt)),it=et.getBBox(),ot>=it.x-5?v.pop(v.length-1).remove():ot=it.x+it.width,l+=ft,k+=d;Math.round(k-d-n-i)&&(s!="-"&&s!=" "&&(a=a.concat(["M",n+i+.5,t-(s=="+"?h:!!e*h*2),"l",0,h*2+1])),v.push(c.text(n+i,t+w,o&&o[nt]||(Math.round(l)==l?l:+l.toFixed(y))).attr(tt)))}return b=c.path(a),b.text=v,b.all=c.set([b,v]),b.remove=function(){this.text.remove(),this.constructor.prototype.remove.call(this)},b},labelise:function(n,t,i){return n?(n+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(n,r,u){return r?(+t).toFixed(r.replace(/^#+\.?/g,"").length):u?(t*100/i).toFixed(u.replace(/^%+\.?/g,"").length)+"%":void 0}):(+t).toFixed(0)}};
//@ sourceMappingURL=g.raphael.min.js.map